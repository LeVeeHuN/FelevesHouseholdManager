<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
             x:Class="FelevesHouseholdManager.FinancesPage"
             Title="FinancesPage"
             xmlns:local="clr-namespace:FelevesHouseholdManager"
             x:DataType="local:FinancesPageViewModel">
    <Grid ColumnDefinitions="*,*"
      RowDefinitions="Auto,*">

        <!-- Left buttons -->
        <HorizontalStackLayout Grid.Row="0" Grid.Column="0" Spacing="8">
            <Button Text="New Income" Command="{Binding AddNewIncomeCommand}"/>
            <Button Text="Delete Income" Command="{Binding DeleteSelectedIncomeCommand}"/>
        </HorizontalStackLayout>

        <!-- Right buttons -->
        <HorizontalStackLayout Grid.Row="0" Grid.Column="1" Spacing="8">
            <Button Text="New Expense" Command="{Binding AddNewExpenseCommand}"/>
            <Button Text="Delete Expense" Command="{Binding DeleteSelectedExpenseCommand}"/>
        </HorizontalStackLayout>

        <!-- Left scrollable list (text only) -->
        <ScrollView Grid.Row="1" Grid.Column="0">
            <CollectionView ItemsSource="{Binding Incomes}"
                            SelectedItem="{Binding SelectedIncome}"
                            SelectionMode="Single">
                <CollectionView.ItemsLayout>
                    <LinearItemsLayout Orientation="Vertical"/>
                    <!-- vertical list -->
                </CollectionView.ItemsLayout>

                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="local:Income">
                        <VerticalStackLayout Padding="8">
                            <Label Text="{Binding Title}" FontAttributes="Bold"/>
                            <Label Text="{Binding Description}" />
                            <Label Text="{Binding Price, StringFormat='{0} Ft'}"/>
                            <Label Text="{Binding CreatedAt}"/>
                        </VerticalStackLayout>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </ScrollView>

        <!-- Right scrollable list (text + image) -->
        <ScrollView Grid.Row="1" Grid.Column="1">
            <CollectionView ItemsSource="{Binding Expenses}"
                            SelectedItem="{Binding SelectedExpense}"
                            SelectionMode="Single">
                <CollectionView.ItemsLayout>
                    <LinearItemsLayout Orientation="Vertical"/>
                </CollectionView.ItemsLayout>

                <CollectionView.ItemTemplate>
                    <DataTemplate x:DataType="local:Expense">
                        <Grid ColumnDefinitions="3*,*"
                          Padding="8">
                            <VerticalStackLayout Grid.Column="0">
                                <Label Text="{Binding Title}" FontAttributes="Bold"/>
                                <Label Text="{Binding Description}" />
                                <Label Text="{Binding Price, StringFormat='{0} Ft'}"/>
                                <Label Text="{Binding CreatedAt}"/>
                            </VerticalStackLayout>

                            <Image Grid.Column="1"
                               WidthRequest="60"
                               HeightRequest="60"
                               Aspect="AspectFill"
                               Source="{Binding ImagePath}" />
                        </Grid>
                    </DataTemplate>
                </CollectionView.ItemTemplate>
            </CollectionView>
        </ScrollView>

    </Grid>

</ContentPage>